<!DOCTYPE html>
  <html>
      <head>
          <title>Demo of ACE Editor</title>
          <meta charset="UTF-8">
          <!--导入js库-->
         <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ace.js" type="text/javascript" charset="utf-8"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
          <script type="text/javascript" src="js/jquery-1.12.1.min.js" ></script>
      <!--  <script type="text/javascript" src="js/FileUtil.js" ></script>-->
      </head>
     
     <body>
         <!--代码输入框（注意请务必设置高度，否则无法显示）-->
        <pre id="code" class="ace_editor" style="min-height:400px"><textarea id="reviewww" class="ace_text-input">
package demo;

public class demo06 {
	public static void main(String[] args) {

	}
}
        </textarea></pre>
 <button id="btn" style="position: relative; width: 70px;height: 35px; left: 90%;">提 交</button>
        <script>
             //初始化对象
             editor = ace.edit("code");
             
             //设置风格和语言（更多风格和语言，请到github上相应目录查看）
             theme = "clouds"
             language = "c_cpp"
             editor.setTheme("ace/theme/" + theme);
             editor.session.setMode("ace/mode/" + language);
             
             //字体大小
             editor.setFontSize(18);
           
             //设置只读（true时只读，用于展示代码）
             editor.setReadOnly(false); 
             
             //自动换行,设置为off关闭
             editor.setOption("wrap", "free")
            
             //启用提示菜单
            ace.require("ace/ext/language_tools");
             editor.setOptions({
                    enableBasicAutocompletion: true,
                     enableSnippets: true,
                     enableLiveAutocompletion: true
                 });
                 
             
      	// 提交事件
          btn.onclick = function(){
             	var o=document.getElementsByTagName("pre");
             	
             	  var s = null;
					for(i=0;i<o.length;i++)
					{
					s = o[i].outerText;    
					}
	             var str =  "package"+s.split("package")[1];
	             
	             var jsonstr = {"code":str};
                alert(JSON.stringify(jsonstr))
            
               $.ajax({
               	type:"post",
               	url:"http://127.0.0.1/",
               	dataType: 'json',
                contentType:'application/json',
               	data:JSON.stringify(jsonstr),
               	async:false,
               	success:function(data) {
               		alert("提交成功");
               	}//,
               	/*error:function(){
               		alert("错误");
               	}*/
               });
               
               
               
               
		}			

         </script>
 
     </body>
</html>
